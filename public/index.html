<html lang="en">

<head>
  <!-- The first thing in any HTML file should be the charset -->
  <meta charset="utf-8">
  <title>Selling Point</title>

  <!-- Use minimum-scale=1 to enable GPU rasterization -->
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale = 1, shrink-to-fit=no, user-scalable=no">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Selling Point">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/img/icons/icon-192x192.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Selling Point">
  <link rel="apple-touch-icon" type="image/png" sizes="192x192" href="/assets/img/icons/icon-192x192.png">

  <!-- Tile for Win8 -->
  <meta name="msapplication-TileColor" content="#0096ff">
  <meta name="msapplication-TileImage" content="/assets/img/icons/icon-192x192.png">

  <!-- Chrome for Android theme color -->
  <meta name="theme-color" content="#0096ff">

  <style>
    @font-face {
      font-family: 'Roboto';
      font-style: normal;
      font-weight: 400;
      src: local('Roboto'), local('Roboto-Regular'), url('/assets/fonts/Roboto-Regular.woff') format('woff');
    }

    @font-face {
      font-family: 'Roboto Medium';
      font-style: normal;
      font-weight: 500;
      src: local('Roboto Medium'), local('Roboto-Medium'), url('/assets/fonts/Roboto-Medium.woff') format('woff');
    }

    @font-face {
      font-family: 'Roboto Slab';
      font-style: normal;
      src: local('Roboto Slab'), url('/assets/fonts/RobotoSlab-Regular.woff') format('woff');
    }
  </style>

  <!-- Allow installing the app to the homescreen -->
  <link rel="manifest" href="/manifest.json">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <!--<link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">-->
  <link href="/assets/css/main.css" rel="stylesheet">
  <!--<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">-->

</head>

<body>
  <!-- Display a message if JS has been disabled on the browser. -->
  <noscript>If you're seeing this message, that means <strong>JavaScript has been disabled on your browser</strong>, please <strong>enable JS</strong>    to make this app work.</noscript>
  <!-- The app hooks into this div -->
  <div id="app">
  </div>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAniPXwmmJ66mOdfGNY5SaVxBkRbfj6KPA&libraries=places"></script>
  <script type="text/javascript">
    if ('serviceWorker' in navigator) {
      // console.log('Check in sw register')
      // navigator.serviceWorker.register('./service-worker.js', { scope: '/' })

      // Delay registration until after the page has loaded, to ensure that our
      // precaching requests don't degrade the first visit experience.
      window.addEventListener('load', function () {
        // Your service-worker.js *must* be located at the top-level directory relative to your site.
        // It won't be able to control pages unless it's located at the same level or higher than them.
        // *Don't* register service worker file in, e.g., a scripts/ sub-directory!
        // See https://github.com/slightlyoff/ServiceWorker/issues/468
        navigator.serviceWorker.register('/service-worker.js', { scope: '/' }).then(function (reg) {
          // updatefound is fired if service-worker.js changes.
          reg.onupdatefound = function () {
            // The updatefound event implies that reg.installing is set; see
            // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event
            var installingWorker = reg.installing
            installingWorker.onstatechange = function () {
              switch (installingWorker.state) {
                case 'installed':
                  if (navigator.serviceWorker.controller) {
                    // At this point, the old content will have been purged and the fresh content will
                    // have been added to the cache.
                    // It's the perfect time to display a "New content is available; please refresh."
                    // message in the page's interface.
                    console.log('New or updated content is available.')
                  } else {
                    // At this point, everything has been precached.
                    // It's the perfect time to display a "Content is cached for offline use." message.
                    console.log('Content is now available offline!')
                  }
                  break;
                case 'redundant':
                  console.error('The installing service worker became redundant.')
                  break
                case 'activated':
                  //Check whether geolocation is supported
                  if (navigator.geolocation) {
                    console.log('Geolocation is supported!');
                    let geoOptions = {
                      maximumAge: 10 * 60 * 1000,//update location if last fetch time is greater than 10 minutes
                      enableHighAccuracy: true// intimate browser to try to get accurate position in meters
                    }
                    /* watchPosition method will continously monitor the user's location */
                    let watchId = navigator.geolocation.watchPosition(geoLocationSuccess, geoLocationError,
                      geoOptions);
                    function geoLocationSuccess(position) {
                      /* Get the location data */
                      console.log('check location ', position)
                      let location = {
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude
                      }
                      //send message to service worker
                      navigator.serviceWorker.controller.postMessage({ 'message': 'STORE_GEOLOCATION', location })
                    }
                    function geoLocationError(error) {
                      //@todo display some banner here instead of console
                      // error.code can be:
                      //   0: unknown error
                      //   1: permission denied
                      //   2: position unavailable (error response from location provider)
                      //   3: timed out
                      console.log('Geo location error ', error.code)
                    }
                  }
                  else {
                    console.log('Geolocation is not supported for this Browser.');
                  }
                  break
              }
            }
          }
        }).catch(function (e) {
          console.error('Error during service worker registration:', e)
        })
      })
    }
  </script>
  <!--<script src="/service-worker.js"></script>-->
  <!-- Open Sans Font -->
  <!-- A lot of magic happens in this file. HtmlWebpackPlugin automatically includes all assets (e.g. bundle.js, main.css) with the correct HTML tags, which is why they are missing in this HTML file. Don't add any assets here! (Check out the webpack config files in internals/webpack for details) -->
<script type="text/javascript" src="/vendor.bundle-785e235e836f78b87f30.js"></script><script type="text/javascript" src="/bundle-785e235e836f78b87f30.js"></script></body>
</html>